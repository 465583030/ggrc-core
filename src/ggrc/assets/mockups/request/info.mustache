{{!
    Copyright (C) 2015 Google Inc., authors, and contributors <see AUTHORS file>
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
    Created By: vladan@reciprocitylabs.com
    Maintained By: vladan@reciprocitylabs.com
}}

{{#instance}}
  <section class="info{{#is_info_pin}} sticky-info-panel{{/is_info_pin}}">
    {{#is_info_pin}}
      <div class="details-wrap pin">
        <ul class="pin-action">
          <li>
            <a href="javascript://" data-size="deselect" class="close-pane"><i class="grcicon-x-grey" rel="tooltip" data-placement="left" title="Close info pane"></i></a>
          </li>
          <li>
            <a href="javascript://" data-size="max" class="max"><i class="grcicon-maximize" rel="tooltip" data-placement="left" title="Maximize height"></i></a>
          </li>
          <li>
            <a href="javascript://" data-size="normal" class="normal"><i class="grcicon-default" style="opacity:1.0" rel="tooltip" data-placement="left" title="Default height"></i></a>
          </li>
          <li>
            <a href="javascript://" data-size="min" class="min"><i class="grcicon-minimize" rel="tooltip" data-placement="left" title="Minimize height"></i></a>
          </li>
        </ul><!-- pin-action end -->
      </div><!-- details-wrap pin end -->
    {{/is_info_pin}}

    <div class="pane-header">
      <div class="row-fluid wrap-row">
        <div class="span9">
          <h6>Title</h6>
          <h3>{{info_title}}</h3>
          <span class="state-value state-{{state_color}}">{{state}}</span>
        </div>
        <div class="span3">
          <div class="info-pane-utility">

            <div class="details-wrap">
              <a class="btn btn-small btn-draft dropdown-toggle" href="#" data-toggle="dropdown">
                <span class="bubble"></span>
                <span class="bubble"></span>
                <span class="bubble"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="drop1" role="menu">
                <li>
                  <a href="#AssessmentDefineTemplate" data-toggle="modal">
                    <i class="grcicon-add-black"></i>
                    Define Assessment template
                  </a>
                </li>
                {{#is_allowed 'update' instance context='for'}}
                  {{> /static/mustache/base_objects/edit_object_link.mustache}}
                {{/is_allowed}}
                <li>
                  <clipboard-link title="Get permalink" notify="true" text="{{get_permalink}}" />
                </li>

                {{#is_info_pin}}
                  {{#is_allowed_to_map page_instance instance}}
                    {{^options.is_in_selector}}
                      {{> /static/mustache/base_objects/unmap.mustache}}

                    {{/options}}
                  {{/is_allowed_to_map}}
                  {{#if instance.viewLink}}
                    {{#is_allowed "view_object_page" instance}}
                      <li>
                        <a href="{{instance.viewLink}}">
                          <i class="grcicon-goto"></i>
                          View {{instance.class.title_singular}}
                        </a>
                      </li>
                    {{/is_allowed}}
                  {{/if}}
                {{/is_info_pin}}

                {{#is_allowed 'delete' instance}}
                  <li>
                    <a data-toggle="modal-ajax-deleteform" data-object-plural="{{model.table_plural}}" data-object-singular="{{model.model_singular}}" data-modal-reset="reset" data-modal-class="modal" data-object-id="{{instance.id}}" href="javascript://">
                      <i class="grcicon-deleted"></i>
                      Delete
                    </a>
                  </li>
                {{/is_allowed}}

              </ul>
            </div>

            <a href="javascript://" class="btn btn-small btn-primary pull-right">Complete</a>
          </div>
        </div>
      </div>
    </div>

    <div class="tier-content">
      <div class="row-fluid">
        <div class="span8">

          <div class="row-fluid wrap-row">
            <div class="span12">
              <h6>Description</h6>
              <div class="rtf-block">
                {{description}}
              </div>
            </div>
          </div>

          <div class="row-fluid wrap-row">
            <div class="span6">
              <h6>Audit Firm</h6>
              None
            </div>
            <div class="span6">
              <h6>URL</h6>
              <a href="javascript://">http://google.com/</a>
            </div>
          </div>

          <div class="row-fluid wrap-row">
            <div class="span12">
              <h6>Code</h6>
              AUDIT-1176
            </div>
          </div>

          <div class="row-fluid wrap-row">
            <div class="span12 small-info ">
              <label class="multi-type-label">
                Audit Folder <label style="display: inline"><i class="grcicon-help-black" rel="tooltip" data-original-title="If selected, all Audit attachments go here."></i></label>
              </label>

              <span class="error">
                No folder for this Audit.
              </span>
              <a href="javascript://" tabindex="" class="entry-attachment tree-item-add" data-toggle="gdrive-picker" data-model="Audit" data-type="folders" data-id="1176">
                <i class="grcicon-attach-color"></i> Assign folder
              </a>

            </div>
          </div>

        </div>

        <div class="span4">

          <div class="row-fluid wrap-row">
            <div class="span12">
              <h6>People</h6>
              <div class="side-content">
                <ul class="label-list">
                  <li>
                    <label>
                      <span class="person-label {{type_lead}}"></span>
                      Audit Lead
                    </label>
                    <ul>
                      {{#people_assignee}}
                        <li>
                          <span class="file-controls">
                            <a href="javascript://"><i class="grcicon-deleted"></i></a>
                            <a href="javascript://"><i class="grcicon-edit"></i></a>
                          </span>
                          <a href="javascript://">{{name}}</a>
                        </li>
                      {{/people_assignee}}
                    </ul>
                  </li>
                  <li>
                    <label>
                      <span class="person-label {{type_auditor}}"></span>
                      Auditor
                    </label>
                    <ul>
                      {{#people_verifier}}
                        <li>
                          <span class="file-controls">
                            <a href="javascript://"><i class="grcicon-deleted"></i></a>
                            <a href="javascript://"><i class="grcicon-edit"></i></a>
                          </span>
                          <a href="javascript://">{{name}}</a>
                        </li>
                      {{/people_verifier}}
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="row-fluid wrap-row">
            <div class="span12">
              <h6>Planned Dates</h6>
              <div class="side-content">
                <ul class="label-list dates">
                  <li class="gray">
                    <label>
                      start
                    </label>
                    10/09/2015
                  </li>
                  <li>
                    <span class="file-controls">
                      <a href="javascript://"><i class="grcicon-edit"></i></a>
                    </span>
                    <label>
                      end
                    </label>
                    11/30/2016
                  </li>
                  <li>
                    <span class="file-controls">
                      <a href="javascript://"><i class="grcicon-edit"></i></a>
                    </span>
                    <label>
                      report period
                    </label>
                    01/01/2016 - 04/30/2016
                  </li>
                </ul>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div><!-- tier-content end -->

  {{{render '/static/mustache/custom_attributes/info.mustache' instance=instance}}}

  </section>

  <div class="info-widget-footer">
    <p>
      <small>
        <em>
          Created at {{date created_at}}
          &nbsp;&nbsp;&nbsp;&nbsp;
          Modified by {{#using person=modified_by}}{{{render '/static/mustache/people/popover.mustache' person=person}}}{{/using}} on {{date updated_at}}
        </em>
      </small>
    </p>
  </div>
{{/instance}}

<div id="AssessmentDefineTemplate" class="modal hide fade modal-selector ui-draggable" tabindex="-1" role="dialog" aria-labelledby="AssessmentDefineTemplateLabel" aria-hidden="true">
  <div class="modal-header">
    <a class="modal-dismiss pull-right" href="javascript://" data-dismiss="modal">
      <i class="grcicon-x-grey"></i>
    </a>
    <h2>
      Assessment Template
    </h2>
  </div>
  <div class="modal-body">
    <div class="hideable-holder">
    <form action="javascript://">

      <div class="row-fluid">
        <div class="span6">
          <label>
            Audit
          </label>
          <strong>2014 Imagine all the people</strong>
        </div>
      </div>
      <br>

      <div class="row-fluid choose-object">
        <div class="span12">
          <label>
            Objects under assessment
          </label>
          <select class="input-medium pull-left" id="underAssessment">
            <optgroup label="Governance">
              <option value="Regulation" label="Regulations">
              </option>
              <option value="Contract" label="Contracts">
              </option>
              <option value="Policy" label="Policies">
              </option>
              <option value="Standard" label="Standards">
              </option>
              <option value="Program" label="Programs">
              </option>
              <option value="Objective" label="Objectives">
              </option>
              <option value="Control" label="Controls">
              </option>
              <option value="Section" label="Sections">
              </option>
              <option value="Clause" label="Clauses">
              </option>
            </optgroup>
            <optgroup label="People/Groups">
              <option value="Person" label="People">
              </option>
              <option value="OrgGroup" label="Org Groups">
              </option>
              <option value="Vendor" label="Vendors">
              </option>
            </optgroup>
            <optgroup label="Assets/Business">
              <option value="DataAsset" label="Data Assets">
              </option>
              <option value="Facility" label="Facilities">
              </option>
              <option value="Market" label="Markets">
              </option>
              <option value="Process" label="Processes">
              </option>
              <option value="Product" label="Products">
              </option>
              <option value="Project" label="Projects">
              </option>
              <option value="System" label="Systems">
              </option>
            </optgroup>
          </select>
          <label class="inline-check pull-left disabled">
            <input type="checkbox" disabled>
            Use control test plans as procedures
          </label>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <label>
            Default procedure
            <i class="grcicon-help-black" rel="tooltip" title="Provide more details on the purpose of this Control Assessment and provide context for how and when this CA might be used."></i>
            <a data-id="hide_description_lk" href="javascript://" class="field-hide">hide</a>
          </label>
          <div class="wysiwyg-area">
            <textarea tabindex="2" id="system_description" class="span12 triple wysihtml5" name="description" placeholder="Enter Description"></textarea>
          </div>
        </div>
        <div class="span6">
          <div class="row-fluid choose-from-select">
            <div class="span6 bottom-spacing">
              <label>
                Default Assessors
                <span class="required">*</span>
              </label>
              <select class="input-block-level" id="assessorDefault">
                <option>Object Owner</option>
                <option>Audit Lead</option>
                <option>Object contact</option>
                <option>Primary assessor</option>
                <option>Secondary assessors</option>
                <option value="other">Other...</option>
              </select>
            </div>
            <div class="span6">
              <label>&nbsp;</label>
              <input type="text" class="input-block-level choose-input" placeholder="Choose person" disabled>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span6 bottom-spacing">
              <label>
                Default verifier
                <span class="required">*</span>
              </label>
              <input type="text" class="input-block-level" placeholder="Choose person">
            </div>
          </div>
        </div>
      </div>

      <div class="custom-attr-wrap">
        <div class="row-fluid">
          <div class="span12">
            <div class="info-expand">
              <a class="show-hidden-fields info-show-hide" href="javascript://">
                <span class="out">
                  <i class="grcicon-arrow-right"></i>
                  Custom attributes
                </span>
                <span class="in">
                  <i class="grcicon-arrow-bottom"></i>
                  Custom attributes
                </span>
              </a>
            </div>
          </div>
        </div><!-- row-fluid end -->
        <div class="hidden-fields-area" style="display:none;">
          <div class="row-fluid wrap-row">
            <div class="span12">
              <div class="custom-attr-table">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Attribute Title</th>
                      <th>Attribute type</th>
                      <th>Attribute values</th>
                      <th class="centered">Mandatory</th>
                      <th>&nbsp;</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Contract length</td>
                      <td>Dropdown</td>
                      <td>0-1 year, 2 years, 3 or more</td>
                      <td class="centered checkbox-wrap"><input type="checkbox" checked></td>
                      <td>
                        <div class="pull-right">
                          <a href="#"><i class="grcicon-edit"></i></a>
                          <a href="#"><i class="grcicon-deleted"></i></a>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td><input type="text"></td>
                      <td>
                        <select>
                          <option>Dropdown</option>
                          <option>Checkbox</option>
                          <option>Text</option>
                        </select>
                      </td>
                      <td>
                        <input type="text" placeholder="Type values separated by comma">
                      </td>
                      <td class="centered checkbox-wrap">
                        <input type="checkbox">
                      </td>
                      <td>
                        <div class="pull-right">
                          <a class="btn btn-small btn-info" href="#">Add field</a>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div><!-- custom-attr-wrap end -->

    </form>
    </div>
  </div>

  <div class="modal-footer">
    <div class="row-fluid">
      <div class="span6">
        &nbsp;
      </div>
      <div class="span6">
        <div class="confirm-buttons">
          <a id="templateDefined" class="btn btn-small btn-success preventdoubleclick " xdata-toggle="modal-submit" data-dismiss="modal" href="javascript://">
            Save
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
